<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>햎쮏 쮐햦햩혧</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f5f5f7; padding: 40px; max-width: 800px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card { background: white; padding: 20px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .status { padding: 5px 10px; border-radius: 10px; font-weight: bold; font-size: 14px; background: #e5e5ea;}
        .status.done { background: #34c759; color: white; }
        .btn { padding: 10px 20px; border-radius: 10px; text-decoration: none; background: #0071e3; color: white; }
    </style>
</head>
<body>

    <div class="header">
        <h1>游녻 햎쮏 향햟햨햟향혦</h1>
        <div>
            <a href="/" class="btn" style="background: white; color: black;"> 햪햟햡햟향햦햫</a>
            <button onclick="logout()" class="btn" style="background: #ff3b30;">뉌햧혝햦</button>
        </div>
    </div>

    <div id="orders">행햟햡혞향햨햟...</div>

<script>
    const userId = localStorage.getItem('userId');
    if(!userId) window.location.href = '/login.html';

    async function loadOrders() {
        // 행햟햟혣햦쒫썛왏 향햟햨햟향혦 햐뉋뤯돯 user id
        const res = await fetch('/api/my-orders', { headers: { 'userid': userId } });
        const orders = await res.json();

        if(orders.length === 0) {
            document.getElementById('orders').innerHTML = '<p>쮏쥃 햫햣혝 향햟햨햟향쮏.</p>';
            return;
        }

        document.getElementById('orders').innerHTML = orders.reverse().map(o => `
            <div class="card">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <b>행햟햨햟향 #${o.orderId.split('-')[1]}</b>
                    <span class="status ${o.status.includes('햆쮐혝햟쒫햣햫') ? 'done' : ''}">${o.status}</span>
                </div>
                <div>${o.items.map(i => i.name).join(', ')}</div>
                <h3 style="margin: 10px 0 0 0;">$${o.total}</h3>
            </div>
        `).join('');
    }

    function logout() {
        localStorage.clear();
        window.location.href = '/login.html';
    }

    loadOrders();
</script>
</body>
</html>